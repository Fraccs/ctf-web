FROM node:18

WORKDIR /app

COPY . .

ARG GITHUB_API_URL
ARG GITHUB_USER
ARG GITHUB_REPO
ARG GITHUB_TARGET_REPO
ARG GITHUB_TOKEN

ENV GITHUB_API_URL=$GITHUB_API_URL
ENV GITHUB_USER=$GITHUB_USER
ENV GITHUB_REPO=$GITHUB_REPO
ENV GITHUB_TARGET_REPO=$GITHUB_TARGET_REPO
ENV GITHUB_TOKEN=$GITHUB_TOKEN

RUN npm i
RUN npm run build

CMD ["npm", "run", "start"]
